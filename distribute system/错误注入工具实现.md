# 一、基于网络通信的服务错误注入

为基于网络通信的服务间实现错误注入，主要分为三个部分：

1. 错误模拟服务(mock服务)：用于模拟被依赖服务接口，并根据需要返回异常或展现出相应异常行为。作用为服务级别的mock，因此后文简称mock服务。在错误注入时用于替换被依赖服务(或者说是请求服务端)。
2. 流量控制：在错误注入过程中需要将客户端网络流量从请求服务端，切换到mock服务，使客户端实际与mock服务进行交互，从而获得模拟异常。
3. 错误观测工具：当错误注入后，需要工具能够观测出系统在该调用链上的健康状态。因此需要工具能够识别整个调用链中特定节点注入错误后，整个调用链是否正常满足业务需要。更进一步需要工具能够检测出整个调用链节点上的服务进程/系统是否仍未受到该次错误影响。
   1. 例如错误注入某节点后，临近节点能正常进行错误处理，但其他节点未正常处理传递的错误则可造成请求调用链的错误
   2. 即使调用链表面正常，未必能保证系统后续仍旧正常，例如某个节点未做超时处理、限流等行为，在调用链下游注入超时异常后，可能会造成该节点队头阻塞。又或者处理异常时没释放限制资源，导致其他服务卡死或资源池逐渐耗尽等。这种情况需要多次测量，并结合系统观测工具，服务日志进行观测。



# 二、错误模拟服务实现

针对

